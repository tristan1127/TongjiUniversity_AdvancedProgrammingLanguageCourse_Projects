# 掃雷遊戲

## 專案簡介

這是一個基於偽圖形介面的掃雷遊戲程式，在 CMD 視窗中實現了經典掃雷遊戲的完整功能。程式支援內部陣列版本和圖形化介面版本，提供多種難度選擇，並包含完整的遊戲邏輯和互動功能。

## 功能特色

### 遊戲難度

- **初級**：較小的遊戲區域，較少的地雷數量
- **中級**：中等大小的遊戲區域，中等地雷數量
- **高級**：大型遊戲區域，較多的地雷數量

### 核心功能

#### 內部陣列版本（子題目 1-4）

1. **子題目 1：選擇難度並顯示內部陣列**
   - 隨機生成指定數量的地雷
   - 計算每個非雷位置周圍的地雷數量（0-8）
   - 顯示完整的內部陣列（含行號列標）
   - 行號使用大寫字母，列標使用數字 1-9 及小寫字母 a-u

2. **子題目 2：輸入初始位置並顯示被打開的初始區域**
   - 所有位置初始顯示為 X（遮蓋狀態）
   - 輸入行列座標（嚴格區分大小寫）
   - 確保初始位置為 0（自身非雷且周圍 8 個位置全部非雷）
   - 自動擴展打開所有相連的 0 區域
   - 擴展至邊界或非 0 非雷位置為止
   - 以亮色反顯方式顯示打開的區域

3. **子題目 3：內部陣列基礎版**
   - 打開初始區域後繼續遊戲
   - 點擊 0 位置自動擴展區域
   - 點擊數字位置顯示該數字
   - 點擊地雷位置遊戲結束
   - 找到所有雷則遊戲成功

4. **子題目 4：內部陣列完整版**
   - 包含基礎版所有功能
   - **特殊輸入功能**：
     - `&`：顯示本局遊戲已運行時間
     - `@`：標記某位置為雷（等同於滑鼠右鍵）
     - `#`：取消標記

#### 偽圖形介面版本（子題目 5-9）

5. **子題目 5：繪製偽圖形化框架並顯示內部資料**
   - 根據難度繪製對應大小的遊戲框架
   - 使用中文製表符繪製邊框
   - 在框架中顯示內部陣列（0 不顯示）

6. **子題目 6：在偽圖形化框架上移動滑鼠，判斷滑鼠位置**
   - 滑鼠在框架上移動時顯示當前行列座標
   - 移動到框架外或網格線上則顯示為非法
   - 單擊左鍵結束
   - 將滑鼠 X/Y 座標轉換為行列框架座標

7. **子題目 7：用滑鼠在偽圖形化框架上點擊初始位置並顯示被打開的初始區域**
   - 結合子題目 2 的內部邏輯
   - 使用滑鼠操作替代鍵盤輸入
   - 視覺化顯示打開的初始區域

8. **子題目 8：偽圖形化遊戲基礎版**
   - 完整的滑鼠操作遊戲流程
   - **滑鼠左鍵**：選擇非雷位置
     - 點擊數字位置顯示數字
     - 點擊 0 位置自動向四周擴展
     - 點擊地雷位置遊戲結束
   - **滑鼠右鍵**：標記/取消標記地雷
   - **ESC 鍵**：退出遊戲
   - 找到所有雷或點擊地雷結束遊戲

9. **子題目 9：偽圖形化遊戲完整版**
   - 包含基礎版所有功能
   - **額外功能**：
     - 顯示剩餘地雷數量
     - 計算並顯示遊戲運行時間
     - 空白鍵顯示當前時間
     - 遊戲結束時顯示最終時間

## 技術規格

### 開發環境

- **編譯器**：Visual Studio 2022
- **控制台**：Windows 控制台主機（新版）
- **建議解析度**：1920×1080（FHD）
- **字型限制**：高級版字型大小不超過 16

### 程式架構

專案包含以下檔案：

```
90-b2/
├── cmd_console_tools.h        # 偽圖形工具函式宣告（不可修改）
├── cmd_console_tools.cpp      # 偽圖形工具函式實現（不可修改）
├── mine_sweeper.h             # 專案主標頭檔
├── mine_sweeper_main.cpp      # 主程式入口
├── mine_sweeper_menu.cpp      # 選單及相關函式實現
├── mine_sweeper_base.cpp      # 內部陣列版相關函式實現
├── mine_sweeper_graph.cpp     # 偽圖形介面相關函式實現
└── mine_sweeper_tools.cpp     # 工具函式（區域擴展、遊戲判斷等）
```

### 程式設計約束

1. **允許使用的知識**：
   - 基本結構、函式、陣列
   - 指標、參考
   - 結構體、類別

2. **禁止使用**：
   - `goto` 語句
   - 全域變數
   - C++ 的 `string` 變數及其他 STL 容器
   - `scanf`/`printf` 進行輸入/輸出

3. **程式碼規範**：
   - 達到「0 errors, 0 warnings」標準
   - 建議每個函式（包括 main）不超過 50 行

4. **白名單**：
   - 允許使用 `conio.h`、`windows.h`、`ctime`

## 核心演算法

### 區域擴展演算法

當點擊到值為 0 的位置時，需要自動向四周擴展打開所有相連的 0 區域：

- **擴展規則**：
  - 從點擊位置開始
  - 找到所有相連的 0
  - 繼續向四周擴散
  - 擴散終止條件：到達邊界或到達非 0 但非雷的位置

- **實現方式**：
  - 可使用遞迴形式
  - 可使用非遞迴形式
  - 可參考深度優先搜尋（DFS）或廣度優先搜尋（BFS）演算法

### 地雷生成邏輯

- 隨機在限定範圍內生成指定數量的地雷
- 必須保證地雷數量足額
- 初始點擊位置必須為 0（保證遊戲不會第一次就失敗）
- 計算所有非雷位置周圍 8 個位置的地雷數量

## 遊戲規則

### 座標系統

- **行號**：大寫字母（A, B, C, ...）
- **列標**：數字 1-9 + 小寫字母 a-u

### 操作方式

#### 內部陣列版
- 鍵盤輸入行列座標
- 特殊指令：`&`（時間）、`@`（標記）、`#`（取消標記）

#### 圖形介面版
- **滑鼠左鍵**：打開格子
- **滑鼠右鍵**：標記/取消標記地雷
- **空白鍵**：顯示遊戲時間
- **ESC 鍵**：退出遊戲

### 遊戲結束條件

- **成功**：找到所有非雷位置
- **失敗**：點擊到地雷位置

## 顯示特色

### 邊框線型

- 支援四種中文製表符邊框線型（任選一種）
- 使用 `cct_showstr` 函式輸出（避免亂碼）

### 顏色配置

- 被標識項目的顏色
- 邊框顏色
- 不同數字的顏色（1-8）
- 選中格子的反顯顏色
- 所有顏色配置無強制要求

### 資訊顯示

- 剩餘地雷數量
- 遊戲運行時間
- 當前滑鼠位置（行列座標）
- 遊戲狀態提示

## 彈性設計

### 內部陣列設計

- 資料型態不限（可用 `char` 或 `int`）
- 儲存值不限：
  - `char` 型：可用 1-8、*、# 等表示
  - `int` 型：1-8 表示雷數，100 表示是雷，999 表示已標記等

### 函式分解

- 函式命名無硬性要求
- 函式功能劃分無硬性要求
- 鼓勵合理的函式分解和調用關係

## 使用說明

1. 編譯並執行程式
2. 選擇子題目（1-9）
3. 選擇遊戲難度（1-3）
4. 根據不同版本使用鍵盤或滑鼠進行遊戲
5. 找到所有非雷位置獲勝

## 注意事項

- 確保使用 Windows 控制台主機（非 PowerShell）
- 建議在 1920×1080 解析度下執行
- 中文邊框線必須使用 `cct_showstr` 輸出
- 初始點擊位置必須確保為 0 值

## 減壓機制

- 可在選單項後加「(未完成)」標記未完成項目
- 未完成項目不進入檢查，給予基礎分數
- 只要正確提交 6 個檔案並編譯通過，即可獲得基礎分數

## 版權說明

本專案為課程作業，僅供學習交流使用。
